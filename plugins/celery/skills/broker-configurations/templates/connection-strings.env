# Celery Broker Connection Strings
#
# SECURITY: This is a template file with placeholders only.
# Copy to .env and replace placeholders with actual values.
# NEVER commit the .env file with real credentials to git.

# =============================================================================
# Redis Broker Configuration
# =============================================================================

# Standard Redis connection
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=your_redis_password_here
REDIS_USE_SSL=false

# Redis connection string format
# redis://[:password@]hostname:port/db_number
CELERY_BROKER_URL=redis://:your_redis_password_here@localhost:6379/0

# Redis with SSL (RedisS)
# CELERY_BROKER_URL=rediss://:your_redis_password_here@redis.example.com:6380/0

# Redis Unix socket
# CELERY_BROKER_URL=redis+socket:///var/run/redis/redis.sock?virtual_host=0

# Redis Sentinel configuration
# REDIS_SENTINEL_HOSTS=sentinel://localhost:26379;sentinel://localhost:26380
# REDIS_SENTINEL_MASTER=mymaster
# REDIS_SENTINEL_PASSWORD=your_sentinel_password_here

# =============================================================================
# RabbitMQ Broker Configuration
# =============================================================================

# RabbitMQ connection
RABBITMQ_HOST=localhost
RABBITMQ_PORT=5672
RABBITMQ_USER=guest
RABBITMQ_PASSWORD=your_rabbitmq_password_here
RABBITMQ_VHOST=/
RABBITMQ_USE_SSL=false

# RabbitMQ connection string format
# amqp://user:password@hostname:port/vhost
CELERY_BROKER_URL=amqp://guest:your_rabbitmq_password_here@localhost:5672/

# RabbitMQ with SSL
# CELERY_BROKER_URL=amqps://user:password@rabbitmq.example.com:5671/vhost

# RabbitMQ SSL certificates (if using SSL)
# RABBITMQ_SSL_CERT=/path/to/client-cert.pem
# RABBITMQ_SSL_KEY=/path/to/client-key.pem
# RABBITMQ_SSL_CA=/path/to/ca-cert.pem

# =============================================================================
# Amazon SQS Broker Configuration
# =============================================================================

# AWS Credentials (use IAM roles on EC2/ECS instead when possible)
AWS_ACCESS_KEY_ID=your_aws_access_key_here
AWS_SECRET_ACCESS_KEY=your_aws_secret_key_here
AWS_SESSION_TOKEN=your_aws_session_token_here
AWS_REGION=us-east-1

# SQS connection string format
# For IAM role (recommended): sqs://
# For explicit credentials: sqs://access_key_id:secret_access_key@
CELERY_BROKER_URL=sqs://

# SQS queue configuration
SQS_QUEUE_PREFIX=celery-
USE_FIFO_QUEUES=false

# =============================================================================
# Result Backend Configuration
# =============================================================================

# Redis result backend (same as broker or different instance)
CELERY_RESULT_BACKEND=redis://:your_redis_password_here@localhost:6379/1

# Database result backend (PostgreSQL example)
# CELERY_RESULT_BACKEND=db+postgresql://user:password@localhost:5432/celery_results

# S3 result backend (for SQS broker)
# CELERY_RESULT_BACKEND=s3://your-s3-bucket-name/

# DynamoDB result backend (for SQS broker)
# CELERY_RESULT_BACKEND=dynamodb://
# AWS_DYNAMODB_TABLE=celery_results

# =============================================================================
# Additional Configuration
# =============================================================================

# Broker connection pool settings
BROKER_POOL_LIMIT=10
BROKER_CONNECTION_TIMEOUT=10

# Result backend pool settings
RESULT_BACKEND_POOL_LIMIT=10

# Timezone
CELERY_TIMEZONE=UTC
CELERY_ENABLE_UTC=true

# Task execution settings
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3000

# Worker settings
CELERYD_PREFETCH_MULTIPLIER=4
CELERYD_MAX_TASKS_PER_CHILD=1000

# =============================================================================
# Environment-Specific Variables
# =============================================================================

# Application environment
ENVIRONMENT=development

# Log level
CELERY_LOG_LEVEL=INFO

# =============================================================================
# Notes
# =============================================================================
#
# 1. Copy this file to .env for development
# 2. Replace all "your_*_here" placeholders with actual values
# 3. Add .env to .gitignore (NEVER commit credentials)
# 4. Use different .env files for different environments:
#    - .env.development
#    - .env.staging
#    - .env.production
# 5. For production, use secret management services:
#    - AWS Secrets Manager
#    - HashiCorp Vault
#    - Doppler
#    - Environment variables in container orchestration
#
