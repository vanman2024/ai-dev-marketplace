# FastAPI Application - Production Environment Variables
# Use secure secret management (Railway variables, AWS Secrets Manager, etc.)
# NEVER commit actual production values to version control!

# Application Settings
ENVIRONMENT=production
DEBUG=False
LOG_LEVEL=INFO
APP_NAME=FastAPI Application
VERSION=1.0.0

# Server Configuration
HOST=0.0.0.0
PORT=${PORT:-8000}  # Use platform-provided PORT or default to 8000
RELOAD=False  # Never use reload in production

# Security (CRITICAL: Change these!)
SECRET_KEY=${SECRET_KEY}  # Use cryptographically secure random string
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# Database (use managed database service)
DATABASE_URL=${DATABASE_URL}  # Provided by platform or use managed DB
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_PRE_PING=True
DB_POOL_RECYCLE=3600

# Redis Cache
REDIS_URL=${REDIS_URL}  # Provided by platform or use managed Redis
CACHE_ENABLED=True
CACHE_TTL=600  # 10 minutes

# CORS Settings (CRITICAL: Restrict to your domains only!)
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com
CORS_ALLOW_CREDENTIALS=True
CORS_ALLOW_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_ALLOW_HEADERS=Content-Type,Authorization,X-Requested-With

# API Rate Limiting
RATE_LIMIT_ENABLED=True
RATE_LIMIT_PER_MINUTE=100

# Email Configuration (use service provider)
SMTP_HOST=${SMTP_HOST}
SMTP_PORT=587
SMTP_USER=${SMTP_USER}
SMTP_PASSWORD=${SMTP_PASSWORD}  # Use app-specific password
SMTP_FROM=${SMTP_FROM}
SMTP_TLS=True

# External API Keys (use platform secrets)
OPENAI_API_KEY=${OPENAI_API_KEY}
AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID}
AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
AWS_REGION=${AWS_REGION:-us-east-1}

# Storage (use cloud storage in production)
UPLOAD_DIR=/tmp/uploads  # Or use S3/DO Spaces
MAX_UPLOAD_SIZE=10485760  # 10MB in bytes
USE_S3=True
S3_BUCKET=${S3_BUCKET}
S3_REGION=${S3_REGION}

# Logging
LOG_FORMAT=json  # Always use JSON in production for log aggregation
LOG_FILE=/var/log/app/app.log

# Feature Flags
ENABLE_SWAGGER_UI=False  # Disable Swagger UI in production
ENABLE_ADMIN_PANEL=False  # Or restrict by IP/auth
ENABLE_METRICS=True

# Monitoring & Observability (optional)
SENTRY_DSN=${SENTRY_DSN}  # Error tracking
NEW_RELIC_LICENSE_KEY=${NEW_RELIC_LICENSE_KEY}  # APM
DATADOG_API_KEY=${DATADOG_API_KEY}  # Metrics

# Security Headers (handled by nginx, but can also set in app)
HTTPS_ONLY=True
HSTS_MAX_AGE=31536000

# Performance
WORKERS=4  # For Gunicorn: (2 x CPU cores) + 1
WORKER_CLASS=uvicorn.workers.UvicornWorker
WORKER_CONNECTIONS=1000
KEEP_ALIVE=5

# Health Checks
HEALTH_CHECK_PATH=/health
HEALTH_CHECK_TIMEOUT=10

# Production Security Checklist:
# ✓ Change SECRET_KEY to cryptographically secure random string
# ✓ Set DEBUG=False
# ✓ Restrict CORS_ORIGINS to your domains only
# ✓ Use managed database services (not local)
# ✓ Enable HTTPS only (no HTTP)
# ✓ Use secure password hashing (bcrypt, argon2)
# ✓ Enable rate limiting
# ✓ Disable Swagger UI or restrict access
# ✓ Use environment-specific secrets (not hardcoded)
# ✓ Enable error monitoring (Sentry, etc.)
# ✓ Use connection pooling for database
# ✓ Set up log aggregation
# ✓ Configure automated backups
# ✓ Implement API authentication (OAuth2, JWT)
# ✓ Review and test CORS settings
# ✓ Set up SSL/TLS certificates
